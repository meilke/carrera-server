<!doctype html>
<html ng-app="raceApp">
  <head>
    <title>Carrera Race</title>
    <link rel="stylesheet" href="/public/css/app.css">
    <link rel="stylesheet" href="/public/css/bootstrap.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>
    <script src="/public/js/app.js"></script>
    <script src="/public/js/race-service.js"></script>
    <script src="/public/js/controller-helper.js"></script>
    <script src="/public/js/main-controller.js"></script>
    <script src="/public/js/driver-controller.js"></script>
  </head>
  <body>
    <div class="container-fluid main-container row" ng-controller="MainController as main">

      <div class="row header">
        <div class="col-md-12" ng-if="main.isCountingDown">
          <div>Countdown</div>
          <div>{{main.secondsToGo}}</div>
        </div>
        <div class="col-md-6" ng-if="!main.isCountingDown">
          <div>Leader</div>
          <div>{{main.leader.name}}</div>
        </div>
        <div class="col-md-6" ng-if="!main.isCountingDown">
          <div>Best lap</div>
          <div>{{main.bestLap.time}} ({{main.bestLap.name}})</div>
        </div>
      </div>

      <div class="row">
        <div ng-repeat="player in main.players">
        
          <div class="driver-container col-md-3" ng-controller="DriverController as driver" ng-init="driver.init(player.name)">
            <div class="name">{{driver.name}} <span class="glyphicon glyphicon-ok" ng-if="driver.player.leader"></span></div>
            <div class="lap-count">{{driver.numberOfLaps}}</div>
            <div class="laps">
              <div class="clearfix lap" ng-repeat="lap in driver.laps track by lap.id">
                <div class="pull-left">{{lap.lap + 1}}</div>
                <div class="pull-right">{{lap.elapsedSec}}</div>              
              </div>
            </div>
          </div>

        </div>

      </div>

      <div class="footer">
        <button class="btn btn-primary btn-lg reset" ng-click="main.reset()">Reset</button>
      </div>

    </div>
  </body>
</html>